<html>
<head>
	<title>raster.ProductResult Widget Tests</title>

	<!-- CSS -->
	<style type='text/css'>
		@import 'http://serverapi.arcgisonline.com/jsapi/arcgis/2.8/js/dojo/dijit/themes/claro/claro.css';
		@import '../../css/core.css';

		#map-div {
			width: 400px;
			height: 400px;
			border: solid 1px gray;
		}
		.panestack {
			width: 329px;
		}
	</style>

	<!-- JAVASCRIPT -->
	<script src="../../js/globals.js" type="text/javascript" charset="utf-8"></script>
	<script type='text/javascript'>
		djConfig = {
			isDebug: true,
			debugAtAllCosts: true,
			baseUrl: './',
			modulePaths: {
				raster: '../../raster',
				agrc: '../../agrc',
				ijit: '../../ijit',
				doh: '../../doh'
			}
		}
	</script>
	<script src='http://serverapi.arcgisonline.com/jsapi/arcgis/?v=2.8' type="text/javascript" charset="utf-8"></script>

	<script type='text/javascript'>

		dojo.require('dojox.robot.recorder');
		dojo.require("doh._browserRunner");
		dojo.require('raster.ProductResult');
		dojo.require('agrc.widgets.map.BaseMap');

		dojo.ready(function () {
			var testWidget;
			var graphic;
			var symbol;

			map = new agrc.widgets.map.BaseMap('map-div');
			graphic = new esri.Graphic(dojo.fromJson(dojo.cache('raster.tests.data', 'ProductResult_graphic.json')));
			dojo.connect(map, 'onLoad', function () {

				function setUp() {
					testWidget = new raster.ProductResult({
						gLayer: map.graphics,
						graphic: graphic,
						showPreview: true,
						map: map,
						title: 'testWidget'
					}, 'test-div');
				}

				doh.register('ProductResult', [
				{
					name: 'hello world',
					setUp: setUp,
					runTest: function () {
						doh.t(testWidget instanceof dijit._Widget);
					}
				}
				]);

				doh.run();

				dojo.publish('mapLoaded', null);
			});

			var testWidget2 = new raster.ProductResult({
				gLayer: map.graphics,
					graphic: graphic,
					showPreview: true,
					map: map,
					title: 'testWidget2'
			}, 'test-div2');
		});
	</script>
</head>
<body class='claro'>
	<div id='map-div'></div>
	<div class='panestack results-pane-inner'>
		<div id='test-div'></div>
		<div id='test-div2'></div>
	</div>
</body>
</html>